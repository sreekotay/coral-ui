{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/reefer/src/xs-observe.js","webpack:///./public/reefer/src/reefer.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","deepObserver","obj","handler","ctxobj","path","Node","this","__xs__","sendAdd","concat","push","attach","_obj","values","skip","v","trigger","propertyObserver","Array","isArray","arr","arrhelpers","mbind","method","_o","pause","apply","arguments","debounceObserve","length","arrayObserverHelper","__observe__","undefined","privateprop","__gidcounter","h","pv","set","configurable","__gobt","__ghsymbol","rootobj","f","a","b","dotpath","bs","reduce","handlerMerge","chainfind","upd","prop","uc","chain","action","ha","prev","find","objmerge","obtype","toString","k","writable","__gob","resolveObserve","gob","_s","delay","setTimeout","exp","window","xs","observe","unobserve","deepUnobserver","splice","alias","obsobj","obsp","refobj","refp","listener","reflect","updates","__observer__","objpd","getOwnPropertyDescriptor","refpd","gf","sf","assign","al","clone","debounce","legacy","document","currentScript","rf_script","reeferHTML","data","constructor","split","slice","join","dsc","getElementsByTagName","cb","reefCB","outerHTML","parentNode","removeChild","ReeferFactory","opts","rf_counter","rf_listeners","rf_key","rf_registry","template","slots","default","datasrc","uk","_d","dc","dot","datactx","dl","gk","genkey","gen","dataslot","empty","text","datakey","header","html","script","__key__","row","footer","reefWarn","console","error","reefError","Error","alwaysobj","rf","run","arg","rels","querySelectorAll","reef","rr","reeferDOM","render_","el","parentReef","reefName","getAttribute","attrBag","attrlist","attributes","attr","indexOf","val","spl","ev","substring","determineDataBinding","JSON","parse","err","lis","getAttributes","cloneEl","cloneNode","children","ga","sa","nodeName","type","args","match","ftext","innerHTML","trim","reefScript","Function","templateEngine","mount","selector","localData","defaultData","use","setAttribute","listeners","rl","e","listenerFactory","addEventListener","reefStop","event","str","argsets","detail","reefEmitRootEl","target","evattr","handlers","evvalue","fn","idx","rval","isfunction","rn","arrtoobj","cif","props","o1","o2","np","Reefer","rootEl","setup","localSetup","_","__","shared","events","decorators","super","sh","methods","obsf","react","observers","doDataBind","sym","loadData","datapath","url","xhr","XMLHttpRequest","onerror","log","emit","onload","status","res","response","open","send","loadHTML","readyState","createElement","src","appendChild","write","realizeSource","copyprop","pp","sp","fp","oc","nc","proppath","sel","selctx","_b","_bp","querySelector","dp","u","getRootNode","unmount","unobs","render","Date","rel","fc","fcounter","htmlBegin","harr","htmlEnd","forEach","classList","contains","rerender","ael","activeElement","startPosition","selectionStart","endPosition","selectionEnd","aeindex","node","childNodes","ind","pop","focus","saveSelection","getAttachPoint","hash","charCodeAt","mergeNode","attemptMerge","nodeType","nodeValue","at","na","nal","ca","cal","removeAttribute","copyAttributes","cc","il","Math","min","ccn","ncn","isEqualNode","replaceChild","ctx","ret","last","resolveEl","dispatchEvent","CustomEvent","ready","documentElement","doScroll","root","_obs","obsrx","regexprep","replace","regx","RegExp","mp","op","mstatus","_ev","mutate","decorate","evrx","watch","copyk","forceClean","hmap","hgeneration","htmlUpdate","id","htmlGen","hm","hsh","div","genid","hta","fl","hc","generation","ah","htaa","cnt","haa","previousSibling","insertBefore","nextSibling","insertAdjacentHTML","htmlKeyToIdx","styleBag","stringify","__xs__style","style","autorun","templateString","register","inname","reefData","superReef","registry","findAll","j","reefer"],"mappings":"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","file":"reefer-min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n",";(function () {\r\n  function deepObserver (obj, handler, ctxobj, path) {\r\n    if (obj instanceof Node) return\r\n    if (!obj && this.__xs__) obj = this // called via obj.__observe__()\r\n    if (!obj) return\r\n    var sendAdd = !!obj.__xs__\r\n\r\n    // only one watcher\r\n    if (ctxobj) {\r\n      path = (path && path.concat()) || []\r\n      path.push(ctxobj)\r\n    }\r\n    handler = attach(handler, obj, path)\r\n\r\n    // do the work\r\n    var _obj = values(obj)\r\n    if (_obj.skip) return\r\n    var v = _obj.v\r\n    for (var p in v) {\r\n      if (p in obj) continue\r\n      delete v[p]\r\n      trigger('delete', obj, p, null, null)\r\n    }\r\n    for (p in obj) {\r\n      if (sendAdd && !(p in v)) trigger('add', obj, p, obj[p], null)\r\n      propertyObserver(obj, p, handler, path)\r\n    }\r\n\r\n    if (Array.isArray(obj)) arrayObserverHelper(obj, handler)\r\n    if (!obj.__observe__ && path === undefined && ctxobj === undefined) privateprop(obj, '__observe__', deepObserver)\r\n    return obj\r\n  }\r\n\r\n  function deepUnobserver (obj, handler) {\r\n    if (!obj.__xs__) return\r\n    var h = obj.__xs__.h\r\n    for (var i = h.length - 1; i >= 0; i--) {\r\n      var ha = h[i]\r\n      if (ha.f === handler) {\r\n        h.splice(i, 1)\r\n      }\r\n    }\r\n    for (var p in obj) if (typeof (p) === 'object' && p !== null) deepUnobserver(p[obj], handler)\r\n  }\r\n\r\n  function arrayObserverHelper (arr, handler) {\r\n    if (arr.__xs__.arrhelpers) return\r\n    arr.__xs__.arrhelpers = true\r\n    var mbind = function (method) {\r\n      var mf = function () {\r\n        var o = this; var _o = o.__xs__\r\n        _o.pause = true; var n = Array.prototype[method].apply(o, arguments); _o.pause = false\r\n        trigger(method, o, arguments, o, null)\r\n        debounceObserve(_o.s, o, deepObserver)\r\n        return n\r\n      }\r\n      arr[method] = mf\r\n    }\r\n    var m = ['pop', 'push', 'shift', 'unshift', 'splice', 'reverse', 'sort']\r\n    for (var i = 0; i < m.length; i++) mbind(m[i])\r\n  }\r\n\r\n  var __gidcounter = 0\r\n  function values (obj) {\r\n    if (!obj.__xs__) {\r\n      var _w = {\r\n        s: '@' + __gidcounter++,\r\n        v: {}, // values for the object\r\n        h: [], // handlers // but don't allocate them if not needed\r\n        /*p: {}, // array of property symbols */\r\n      }\r\n      privateprop(obj, '__xs__', _w)\r\n    }\r\n    return obj.__xs__\r\n  }\r\n\r\n  function propertyObserver (obj, p, handler, path) {\r\n    var _obj = values(obj)\r\n    var v = _obj.v\r\n    if (handler !== obj) handler = attach(handler, obj)\r\n    var pv = obj[p]\r\n    if (!(p in v)) { // already done\r\n      v[p] = pv\r\n      var gf = function () { return v[p] }\r\n      var sf = function (n) {\r\n        var o = v[p]; v[p] = n\r\n        if (typeof (n) === 'object' && n !== null && !n.__xs__) {\r\n          // deepObserver(n, handler, { o: obj, p: p }, path)\r\n          debounceObserve(_obj.s, obj, function () { deepObserver(n, handler, { o: obj, p: p }, path) }, true)\r\n        }\r\n        trigger('set', obj, p, n, o)\r\n        return n\r\n      }\r\n      Object.defineProperty(obj, p, { get: gf, set: sf, enumerable: true, configurable: true })\r\n    }\r\n    if (typeof (pv) === 'object') deepObserver(pv, handler, { o: obj, p: p }, path)\r\n  }\r\n\r\n  var __ghsymbol = 0\r\n  function attach (handler, obj, path) {\r\n    if (handler === obj || !handler) return obj\r\n    if (typeof (handler) === 'object') handler = values(handler).h\r\n    else handler = [{ rootobj: obj, f: handler, path: path, s: '#' + __ghsymbol++ }]\r\n\r\n    var _obj = values(obj)\r\n    //var h = _obj.h = _obj.h || []\r\n    handlerMerge(_obj.h , handler, path)\r\n    return obj\r\n  }\r\n\r\n  function handlerMerge (a, b, path) { // modifies original array\r\n    if (a === b) return\r\n    var dotpath = path || ''\r\n    for (var i = 0; i < b.length; i++) {\r\n      var bs = b[i].s\r\n      if (!a[bs]) {\r\n        if (dotpath === undefined) dotpath = path.reduce(function (p, n) { return p + (p && '.') + n.p }, '')\r\n        a[bs] = true\r\n        a.push({ f: b[i].f, s: b[i].s, path: path, dotpath: dotpath })\r\n      }\r\n    }\r\n  }\r\n\r\n  function chainfind (upd, obj) { // for events\r\n    if (obj === upd.obj) return upd.prop\r\n    var uc = upd.chain\r\n    for (var i = 0; i < uc.length; i++) if (uc[i].o === obj) return uc[i].p\r\n    return null\r\n  }\r\n\r\n  function trigger (action, obj, p, n, o) {\r\n    var _obj = obj.__xs__\r\n    if (/* n === o || */!_obj || !_obj.h || _obj.pause) return // don't send event if value the same\r\n    var h = _obj.h\r\n    for (var i = 0; i < h.length; i++) {\r\n      var ha = h[i]\r\n      var upd = { rootobj: ha.rootobj, obj: obj, action: action, prop: p, value: n, prev: o, chain: ha.path, path: ha.dotpath ? ha.dotpath + '.' + p : undefined, find: chainfind }\r\n      ha.f.call(obj, upd)\r\n    }\r\n  }\r\n\r\n  function alias (obsobj, obsp, refobj, refp, listener) {\r\n    var reflect = function (updates) {\r\n      if (updates.chain && updates.chain.length && updates.chain[0].p === refp) {\r\n        if (updates.chain.length === 1 && obsobj[obsp] !== updates.obj) obsobj[obsp] = updates.obj\r\n        updates.chain[0].p = obsp // alias it\r\n        listener(updates)\r\n        updates.chain[0].p = refp // set it back\r\n      } else if (!updates.chain && updates.prop === refp) {\r\n        if (updates.value !== obsobj[obsp]) { obsobj[obsp] = updates.value }\r\n        updates.prop = obsp // alias it\r\n        listener(updates)\r\n        updates.prop = refp\r\n      }\r\n    }\r\n    if (refobj instanceof Node) {\r\n      if (!(obsp in obsobj)) obsobj[obsp] = obsobj[obsp] // \"realize\" it\r\n      if (!obsobj.__observer__) xs.observe(obsobj)\r\n      var objpd = Object.getOwnPropertyDescriptor(obsobj, obsp)\r\n\r\n      Object.defineProperty(obsobj, obsp, {\r\n        get: function () { return refobj[refp] },\r\n        set: function (v) { refobj[refp] = v; return objpd.set(v) },\r\n        enumerable: true,\r\n        configurable: true })\r\n      return null\r\n    }\r\n    if (!(refp in refobj)) refobj[refp] = refobj[refp] // \"realize\" it\r\n    xs.observe(refobj, reflect)\r\n    obsobj[obsp] = refobj[refp] // copy the initial\r\n    xs.observe(obsobj)\r\n\r\n    // below makes it two way\r\n    var refpd = Object.getOwnPropertyDescriptor(refobj, refp)\r\n    var gf = refpd.get\r\n    var sf = refpd.set\r\n    Object.defineProperty(obsobj, obsp, { get: gf, set: sf, enumerable: true, configurable: true })\r\n\r\n    return reflect\r\n  }\r\n\r\n  // ==============\r\n  // helper stuff\r\n  // ==============\r\n  function objmerge (a, b) {\r\n    if (b === undefined) return a\r\n    if (typeof (b) !== 'object' || b === null) return b\r\n    var obtype = Object.prototype.toString.call(b)\r\n    if (obtype === '[object RegExp]' || obtype === '[object Date]' || b instanceof Node) return b\r\n    if (obtype === '[object Array]') {\r\n      if (Object.prototype.toString.call(a) !== '[object Array]') a = [] // should we FORCE to array?\r\n      var c = []\r\n      for (var i in b) { if (!(i in a)) c[i] = b[i] }\r\n      for (i in c) a[i] = c[i]\r\n      return a\r\n    }\r\n    if (typeof (a) !== 'object') a = {}\r\n    for (var k in b) a[k] = objmerge(a[k], b[k])\r\n    return a\r\n  }\r\n  function objassign () { var a = arguments; var al = 0; var o = a[0]; while (++al < a.length) o = objmerge(o, a[al]); return o }\r\n  function objclone () { var a = arguments; var al = -1; var o = {}; while (++al < a.length) o = objmerge(o, a[al]); return o }\r\n  function privateprop (o, k, v, writable) { Object.defineProperty(o, k, { value: v, enumerable: false, configurable: true, writable: !!writable }); return v }\r\n\r\n  var __gobt; var __gob = {}\r\n  function resolveObserve () {\r\n    __gobt = null; var gob = __gob; __gob = {}\r\n    for (var k in gob) { if (gob[k]) gob[k].f.call(gob[k].o, gob[k].o) }\r\n  }\r\n  function debounceObserve (_s, o, f, delay) {\r\n    // f.call(o, o); return true;\r\n    if (__gobt) {\r\n      if (!(_s in __gob) && !delay) {\r\n        f.call(o, o)\r\n        __gob[_s] = null\r\n      } else __gob[_s] = { f: f, o: o }\r\n      return false\r\n    }\r\n    if (!delay) f.call(o, o)\r\n    else __gob[_s] = { f: f, o: o }\r\n    __gobt = setTimeout(resolveObserve, 0)\r\n    return true\r\n  }\r\n\r\n  // export\r\n  var exp = window\r\n  exp.xs = exp.xs || {}\r\n  exp.xs.observe = deepObserver\r\n  exp.xs.unobserve = deepUnobserver\r\n  exp.xs.alias = alias\r\n  exp.xs.assign = objassign\r\n  exp.xs.clone = objclone\r\n  exp.xs.debounce = debounceObserve\r\n  exp.xs.privateprop = privateprop\r\n}).call(this)\r\n","var legacy = !document.currentScript\r\nvar rf_script = null\r\nwindow.reeferHTML = function (data) {\r\n  function isfunction (obj) { return !!(obj && obj.constructor && obj.call && obj.apply) }\r\n  if (isfunction(data)) data = data.toString().split('\\n').slice(1, -1).join('\\n')\r\n  var dsc = legacy ? null : document.currentScript\r\n  if (!dsc) dsc = rf_script\r\n  if (!dsc) { // IE11 support\r\n    dsc = document.getElementsByTagName('script')\r\n    dsc = dsc[dsc.length - 1]\r\n  }\r\n  rf_script = null\r\n  var cb = dsc.reefCB\r\n  if (cb === undefined) dsc.outerHTML = data\r\n  else cb(data)\r\n  if (dsc.parentNode) dsc.parentNode.removeChild(dsc)\r\n}\r\n\r\nReeferFactory = function (opts) {\r\n  opts = opts || {}\r\n  var rf_counter = 0 // used for 'symbol'\r\n  var rf_listeners = {}\r\n  var rf_key = 0\r\n  var rf_registry = {\r\n    '': {\r\n      template: function () {\r\n        var slots = this.slots || {}\r\n        if (!slots.default) return// 'done'\r\n        if (!this.data.datasrc) return 'done'\r\n        var _d = this.data\r\n        var dc = ('datactx' in _d) ? this.dot(_d.datactx).value : {}\r\n        var dl = ('datasrc' in _d) ? this.dot(_d.datasrc).value : this\r\n        var gk = this.data.genkey\r\n        var gen = (dl && slots[_d.dataslot || 'default']) || (slots.empty && slots.empty.text) || { text: '<div> </div>' }\r\n        var key = _d.datakey; var uk\r\n        if (!Array.isArray(dl)) dl = [dl]\r\n        if (slots.header) this.html(-1, slots.header.script ? slots.header(dc) : slots.header.text)\r\n        for (var i = 0; i < dl.length; i++) {\r\n          var t = typeof (dl[i])\r\n          if (dl[i]) uk = key === undefined ? dl[i].__key__ : dl[i][key]\r\n          if (gk && uk === undefined && t === 'object') uk = xs.privateprop(dl[i], '__key__', 'k' + rf_key++)\r\n          var row = gen.script ? gen.script(dl[i], i, dc) : gen.text\r\n          this.html(uk || i, row)\r\n        }\r\n        if (slots.footer) this.html(-2, slots.footer.script ? slots.footer(dc) : slots.footer.text)\r\n      }\r\n    }\r\n  }\r\n\r\n  function reefWarn () { console.error(arguments) }\r\n  function reefError () { console.error(arguments); throw Error('REEF FAULT') }\r\n  function alwaysobj (rf, n) { rf[n] = rf[n] || {}; return rf[n] }\r\n\r\n  // ===========\r\n  // dom\r\n  // ===========\r\n  function run (arg) {\r\n    var d = (arg || document)\r\n    var r = []\r\n    var rels = d.querySelectorAll(':not([reef-stage])[reef]')\r\n    for (var i = 0; i < rels.length; i++) {\r\n      if (!rels[i].reef) {\r\n        var rr = reeferDOM(rels[i], d.reef)\r\n        if (rr) rr.render_()\r\n        r.push(rr)\r\n      }\r\n    }\r\n    return r\r\n  }\r\n\r\n  // var stripper = document.createElement('textarea')\r\n  function reeferDOM (el, parentReef) {\r\n    if (!el) return null\r\n    var reefName = el.getAttribute('reef')\r\n    try {\r\n      var attrBag = getAttributes(el)\r\n      var cloneEl = el.cloneNode(true) // deep copy\r\n      if (cloneEl) {\r\n        attrBag = attrBag || {}\r\n        if (cloneEl.children) {\r\n          for (var i = 0; i < cloneEl.children.length; i++) {\r\n            var slots = alwaysobj(attrBag, 'slots')\r\n            var c = cloneEl.children[i]\r\n            var ga = c.getAttribute\r\n            var attr = (ga && ga.call(c, 'reef-slot')) || 'default'\r\n            var sa = slots[attr] = slots[attr] || []\r\n            sa.push(c)\r\n            sa.text = (sa.text || '') + (ga ? c.outerHTML : c.data) // convenience\r\n            if (c.nodeName === 'SCRIPT' && c.type.indexOf('reef-') === 0) {\r\n              try {\r\n                var type = c.getAttribute('type')\r\n                var args = type.match(/\\(([^)]*)\\)/); args = args ? args[1] : ''\r\n                var ftext = c.innerHTML.trim()\r\n                // stripper.innerHTML = ftext\r\n                // ftext = stripper.children.length === 0 ? '' : stripper.children[0].data\r\n                if (ftext) {\r\n                  switch (type.split('(')[0].trim()) {\r\n                    case 'reef-function': c.reefScript = new Function(args, ftext); break\r\n                    case 'reef-template': c.reefScript = templateEngine(args, ftext); break\r\n                    default: reefWarn('unknown reef slot type')\r\n                  }\r\n                }\r\n              } catch (err) { reefWarn('reef-slot script parsing ERROR:', ftext || c.type, c, err) }\r\n              if (!('el' in sa)) sa.el = c // convenience\r\n              if (!('script' in sa) && c.reefScript) sa.script = c.reefScript // convenience\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return mount(el, reefName, attrBag, parentReef)\r\n    } catch (err) {\r\n      reefWarn('Reefer failed to mount: ', reefName, el, err)\r\n    }\r\n    return null\r\n  }\r\n  /*\r\n  function parseArgs (str) {\r\n    var argsets = str.match(/\\(([^)]*)\\)/)\r\n    return (argsets && argsets[1]) || ''\r\n  }\r\n*/\r\n  function getAttributes (el) {\r\n    var attrBag\r\n    var attrlist = el.attributes\r\n    for (var i = 0; i < attrlist.length; i++) {\r\n      var attr = attrlist[i]\r\n      var n = attr.name + ''\r\n      if (n.indexOf('reef-p') === 0) {\r\n        attrBag = attrBag || { }\r\n        var val = attr.value\r\n        var spl = n[6] // whatever the character is... use two of those to split - 6 is len of 'reef-p'\r\n        var ev = val.split(spl + spl); val = ev[0]; ev = ev[1]\r\n        var p = n.substring(7) // 7 is len of 'reef-pX' (note the 'X')\r\n        var d = determineDataBinding(p, val)\r\n        try { val = JSON.parse(val) } catch (err) {}\r\n        if (!d) alwaysobj(attrBag, 'props')[p] = val; else alwaysobj(attrBag, 'bind')[p] = d\r\n        if (ev) alwaysobj(attrBag, 'events')[p] = ev\r\n      } else if (n.indexOf('reef@') === 0) {\r\n        var lis = n.substring(5)\r\n        attrBag = attrBag || { }\r\n        alwaysobj(attrBag, 'listeners')[lis] = attr.value\r\n      }\r\n    }\r\n    return attrBag\r\n  }\r\n\r\n  function determineDataBinding (k, v) {\r\n    if (v[0] !== '~') return false\r\n    var s = v.split('~')\r\n    return { prop: s[1], selector: (s.length < 2) ? '^' : s[2] }\r\n  }\r\n\r\n  function templateGenerator (args, templateString) {\r\n    return new Function(args, 'return `' + templateString + '`;')\r\n  }\r\n\r\n  function templateGeneratorES5 (args, templateString) {\r\n    templateString = templateString.split('\\n').join('\\\\\\n').replace(/\"/g, '\\\\\"') // multiline and escape double quotes and slashes\r\n    return new Function(args, 'var f=function (_, exp) {return eval(exp)}; f.bind(this); return \"' + templateString + '\".replace(/\\\\${(.*?)}/g, f)')\r\n  }\r\n\r\n  function mount (el, name, localData, parentReef) {\r\n    localData = localData || {}\r\n    if (!rf_registry[name]) reefError('Reefer NOT registered: ', name)\r\n\r\n    // make Reefer\r\n    var defaultData = rf_registry[name]\r\n    var reef = el.reef = new opts.use(el, defaultData, localData)\r\n    reef.name = name\r\n    el.setAttribute('reef-stage', 'mounted')\r\n\r\n    // register listeners\r\n    if (reef.listeners) {\r\n      var rl = reef.listeners\r\n      for (var k in rl) {\r\n        var ev = k.split('@')\r\n        var e = ev[0]\r\n        if (!rf_listeners[e]) { // we only need to add it once\r\n          rf_listeners[e] = listenerFactory(e)\r\n          document.addEventListener(e, rf_listeners[e], false)\r\n        }\r\n        rl[e] = rl[k]\r\n        if (rl[ev[1]] === 'stop') rl[e].reefStop = true\r\n      }\r\n      reef.listeners = null // keep the tag so we know we had listeners - but they are source from the registry\r\n    }\r\n\r\n    return reef\r\n  }\r\n\r\n  function listenerFactory (type) {\r\n    return function (event) {\r\n      var el = (event.detail && event.detail.reefEmitRootEl) || event.target; var rr\r\n      var evattr = 'reef@' + type\r\n      var handlers = []\r\n      while (el) {\r\n        var evvalue = el.getAttribute && el.getAttribute(evattr)\r\n        if (evvalue) { evvalue = evvalue.split('@'); handlers.push(evvalue) }\r\n        var reef = el.reef\r\n        if (!event.reef) event.reef = reef\r\n        if (reef && handlers.length) { // parse the handler for the event\r\n          for (var i = 0; i < handlers.length; i++) {\r\n            var ev = handlers[i]\r\n            var fn = ev[0].trim()\r\n            /*\r\n            var func = function (event) { eval(fn) }\r\n            try { func.call(reef, event) } catch (err) { reefWarn('reef@Error') }\r\n            /* // old syntax - you do do prop(value)\r\n            */\r\n            var parseArgs = function (str) {\r\n              var argsets = str.match(/\\(([^)]*)\\)/)\r\n              return (argsets && argsets[1]) || ''\r\n            }\r\n            var args = parseArgs(fn).split(',')\r\n            if (args) {\r\n              fn = fn.split('(')[0]\r\n              var idx = args.indexOf('$event') // allow substition\r\n              if (idx >= 0) args[idx] = event\r\n            }\r\n            var f = reef.dot(fn); var rval\r\n            if (f.value !== undefined) {\r\n              if (isfunction(f.value)) rval = f.value.apply(f.obj, args || [event])\r\n              else reef.dot(fn, args[0])\r\n              if (rval === 'stop' || ev[1] === 'stop') return\r\n            }\r\n          }\r\n        }\r\n        var rn = reef && reef.name\r\n        if (rf_registry[rn]) {\r\n          rr = rf_registry[rn]\r\n          if (rr.listeners && rr.listeners[type]) {\r\n            if (rr.listeners[type].call(reef, event) === 'stop' || rr.listeners[type].reefStop) { return } // hmm - should we support bubbling?\r\n          }\r\n        }\r\n        el = el.parentNode\r\n      }\r\n    }\r\n  }\r\n\r\n  function register (inname, reefData, superReef) {\r\n    var name = (inname[0] === '*') ? inname.substring(1) : inname\r\n    superReef = superReef || ''\r\n    reefData.data = arrtoobj(reefData.data, undefined)\r\n    if (rf_registry[name]) { if (inname === name) reefError('Reefer already registered: ' + name); return }\r\n    if (!rf_registry[superReef]) reefError('Super Reef NOT registered: ' + superReef)\r\n    rf_registry[name] = xs.assign({}, rf_registry[superReef], reefData)\r\n    rf_registry[name].name = name\r\n    rf_registry[name].super = superReef\r\n    return true\r\n  }\r\n\r\n  // ===========\r\n  // Reefer - helpers\r\n  // ===========\r\n  function resolveEl (el, ctx) { if (typeof (el) !== 'string') return el; return resolveEl(ctx || document).querySelector(el) }\r\n  function isfunction (obj) { return !!(obj && obj.constructor && obj.call && obj.apply) }\r\n  function arrtoobj (arr, v) { if (!Array.isArray(arr)) return arr; var o = {}; for (var i = 0; i < arr.length; i++) o[arr[i]] = (arguments.length <= 1 ? true : v); return o }\r\n  function cif (o, props, o1, o2) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var p = props[i]\r\n      var np = (p in o2) ? o2[p] : o1[p]\r\n      if (np === undefined) continue\r\n      o[p] = xs.clone(np)\r\n    }\r\n  }\r\n\r\n  // =============\r\n  // Reefer - constructor\r\n  // =============\r\n  function Reefer (rootEl, setup, localSetup) {\r\n    setup = setup || {}\r\n    localSetup = localSetup || {}\r\n    var rf = this\r\n    var _ = this.__ = {}\r\n    cif(_, ['template', 'update', 'bind'], setup, localSetup)\r\n    cif(this, ['methods', 'observers', 'listeners', 'mutate'], setup, localSetup) // intentional shallow copies\r\n    if ('shared' in setup) this.shared = setup.shared\r\n    if (setup.events || localSetup.events) _.events = xs.assign({}, arrtoobj(setup.events), localSetup.events)\r\n    if (setup.decorators || localSetup.decorators) _.decorators = xs.assign({}, arrtoobj(setup.decorators), arrtoobj(localSetup.decorators))\r\n    if (setup.slots || localSetup.slots) xs.assign(alwaysobj(this, 'slots'), setup.slots, localSetup.slots)\r\n    if ('super' in setup) this.super = rf_registry[setup.super]\r\n\r\n    var sh = this.methods; if (sh) for (var k in sh) sh[k] = isfunction(sh[k]) ? sh[k].bind(rf) : sh[k] // bind to reef\r\n    // sh = this.observers; if (sh) for (k in sh) sh[k] = isfunction(sh[k]) ? sh[k].bind(rf) : sh[k] // bind to reef\r\n    this.rootEl = rootEl\r\n    _.obsf = function () { Reefer.prototype.react.apply(rf, arguments) }\r\n    var _d = this.data = xs.observe({}, _.obsf) // public as well -- our main \"react\" core\r\n    xs.assign(_d, _.decorators, setup.data, localSetup.props) // make our data\r\n    for (k in this.observers) if (!(k in _d)) _d[k] = undefined\r\n    for (k in _.bind) doDataBind(this, 'data.' + k, _.bind[k].selector, _.bind[k].prop)\r\n    _d.__observe__() // trigger observers\r\n    this.sym = '$' + rf_counter++\r\n    return this\r\n  }\r\n  Reefer.prototype.unmount = function () {\r\n    var _ = this.__ || {}\r\n    xs.unobserve(this.data, _.obsf)\r\n    if (_.bind) {\r\n      for (var k in _.bind) {\r\n        var b = _.bind[k]\r\n        if (b.obsf) xs.unobserve(b.sp.obj, b.obsf)\r\n      }\r\n    }\r\n  }\r\n\r\n  function regexprep (o) { var s = ''; for (var k in o) { s += ':xs:' + k + '\\n' }; return s }\r\n\r\n  // =============\r\n  // react\r\n  // =============\r\n  Reefer.prototype.react = function (updates) { // core event engine\r\n    // if (updates.value === updates.prev) return\r\n    updates.reef = this\r\n    var _ = this.__\r\n    var status\r\n    var p = updates.root = updates.path ? updates.path.split('.')[0] : updates.prop\r\n    var _obs = this.observers\r\n    if (_obs) {\r\n      _.obsrx = _.obsrx || regexprep(_obs)\r\n      if (updates.path) {\r\n        var str = '(:xs:((' + updates.path.replace(/\\./g, '\\\\.)|(\\\\*\\\\.))*((') + ')|(\\\\*)))\\n'\r\n        var regx = new RegExp(str, 'g')\r\n        var m = _.obsrx.match(regx)\r\n        if (m) {\r\n          var mp = m[0]\r\n          for (var i = 1; i < m.length; i++) if (m[i].length > mp.length) mp = m[i]\r\n          p = mp.substring(4, mp.length - 1) // skipe the ':xs:\r\n        }\r\n      }\r\n      var op = _obs[p]\r\n      if (op) {\r\n        if (isfunction(op)) status = op.call(this, updates)\r\n        else {\r\n          if (!updates.path && (updates.action === 'set' || updates.action === 'add')) {\r\n            var o = this.dot(op)\r\n            if (isfunction(o.value)) o.value.call(this)\r\n            else o.obj[o.prop] = updates.value\r\n          }\r\n        }\r\n      }\r\n    }\r\n    var _ev = _.events\r\n    if (_ev && _ev[p]) {\r\n      var e = _.name + '.' + (_ev[p] === true ? p : _ev[p])\r\n      emit(this.rootEl, e, updates)\r\n    }\r\n\r\n    var mstatus\r\n    if (updates.value === updates.prev) return\r\n    if (this.mutate) mstatus = this.mutate.call(this, updates)\r\n    var _d = _.decorators\r\n    if (!this.sym) return // we are still constructing\r\n    if (status !== 'done' && mstatus !== 'done' && (!_d || (!_d[p] && !_d[mp]))) this.rerender() // re-render\r\n  }\r\n  Reefer.prototype.observe = function (k, cb) { var _o = alwaysobj(this, 'observers'); _o[k] = cb; this.__.obsrx = null }\r\n  Reefer.prototype.decorate = function (k, set) { var _d = alwaysobj(this, 'decorators'); _d[k] = (set !== false && set !== 0) }\r\n  Reefer.prototype.events = function (k, set) { var _e = alwaysobj(this.__, 'events'); _e[k] = (set !== false && set !== 0 && set); this.__.evrx = null }\r\n  Reefer.prototype.watch = function (k, o) { this.data[k] = o; this.data.__observe__() }\r\n  Reefer.prototype.bind = function (k, sel, copyk, ctx) { doDataBind(this, k, sel, copyk, ctx) }\r\n  Reefer.prototype.emit = function (ev, detail) { emit(this.rootEl, ev, detail) }\r\n  function loadData (datapath, url, opts) { // this must be Reefer\r\n    var rf = this\r\n    opts = opts || {}\r\n    var rf = this\r\n    var xhr = opts.xhr || new XMLHttpRequest()\r\n    /* if (!opts.xhr || opts.responseType) // either it's new or it's passed in\r\n    { xhr.responseType = opts.responseType || 'json' } */\r\n    xhr.onerror = function (err) { console.log('REEF HTTP LOAD', err); emit(rf.rootEl, 'reefLoadDataFail', { url: url }) }\r\n    xhr.onload = function (ev) {\r\n      if (this.status === 200) {\r\n        var res = this.response\r\n        try { res = JSON.parse(res) } catch (err) {}\r\n        rf.dot(datapath, res)\r\n      } else if (this.status) xhr.onerror(ev)\r\n    }\r\n    xhr.open(opts.method || 'GET', url, true)\r\n    xhr.send(null)\r\n    return xhr\r\n  }\r\n  function loadHTML (datapath, url) { // this must be Reefer\r\n    var rf = this\r\n    if (document.readyState !== 'loading') {\r\n      var script = document.createElement('script')\r\n      script.src = url\r\n      document.getElementsByTagName('head')[0].appendChild(script)\r\n    } else {\r\n      document.write('<script src=\"' + url + '\"></script')\r\n      script = document.getElementsByTagName('script')\r\n      script = script[script.length - 1]\r\n    }\r\n    script.onerror = function (err) { console.log('REEF SCRIPT LOAD', err); script.parentNode.removeChild(script); emit(rf.rootEl, 'reefLoadHTMLFail', { url: url }) }\r\n    script.reefCB = function (data) { rf.dot(datapath, data) }\r\n    rf_script = script\r\n    return script\r\n  }\r\n\r\n  function realizeSource (refobj, copyprop) {\r\n    var pp = copyprop.split('.')\r\n    sp = dot(refobj, pp)\r\n    if (sp.obj) return sp\r\n    var fp = copyprop.split('.'); var oc = refobj\r\n    for (var i = 0; i < fp.length; i++) {\r\n      var nc = oc[fp[i]]; if (nc === undefined || nc === null || typeof (nc) !== 'object') oc[fp[i]] = (i == fp.length - 1 ? undefined : {}); oc = oc[fp[i]]\r\n    }\r\n    return dot(refobj, pp)\r\n  }\r\n\r\n  function doDataBind (rf, proppath, sel, copyprop, selctx) {\r\n    var refobj, sp\r\n    sel = sel || '^'\r\n    var _ = rf.__\r\n    var _b = alwaysobj(_, 'bind')\r\n    var _bp = alwaysobj(_b, proppath)\r\n    copyprop = copyprop || proppath\r\n    if (_bp.proppath === proppath && _bp.selector === sel && _bp.prop === copyprop) return\r\n    switch (sel[0]) {\r\n      case '^':\r\n        sp = realizeSource(rf, copyprop)\r\n        break\r\n      case '#':\r\n      case '.':\r\n      case '[':\r\n        var el = (selctx || document).querySelector(sel)\r\n        refobj = el && el.reef\r\n        if (!refobj) reefError('unable to locate reef for bind')\r\n        sp = realizeSource(refobj, copyprop)\r\n        break\r\n      case '$':\r\n        el = sel.substring(1, 6)\r\n        var url = sel.substring(6)\r\n        _b[proppath] = { proppath: proppath, selector: sel, prop: copyprop }\r\n        switch (el) {\r\n          case 'json:': return loadData.call(rf, proppath, url)\r\n          case 'html:': return loadHTML.call(rf, proppath, url)\r\n        }\r\n        // fall through\r\n      default:\r\n        reefError('unknown data bind: ' + proppath + ': ' + sel)\r\n    }\r\n\r\n    var dp = dot(rf, proppath)\r\n    if (!dp.obj) reefError('data bind not found: ' + proppath)\r\n    var f = function (u) {\r\n      if (!rf.rootEl || rf.rootEl.getRootNode() !== document) {\r\n        rf.unmount()\r\n        return\r\n      }\r\n      rf.react(u)\r\n    }\r\n    var obsf = xs.alias(dp.obj, dp.prop, sp.obj, sp.prop, f)\r\n    _b[proppath] = { proppath: proppath, selector: sel, prop: copyprop, sp: sp, unobs: obsf }\r\n  }\r\n\r\n  // =============\r\n  // render\r\n  // =============\r\n  Reefer.prototype.render_ = render\r\n  Reefer.prototype.render = function () {\r\n    xs.debounce(this.sym + '_rr', this, render)\r\n  }\r\n  function render () {\r\n    var t = new Date()\r\n    var rel = this.rootEl\r\n    if (!rel || rel.getRootNode() !== document) {\r\n      this.unmount()\r\n      return\r\n    }\r\n    var template = this.__.template\r\n    if (template) {\r\n      var fc = this.__.fcounter\r\n      if (fc) this.htmlBegin()\r\n      fc = this.__.fcounter //  reset it\r\n      var res = template.call(this, this.slots) || ''\r\n      if (this.__.harr) this.htmlEnd()\r\n      else if (typeof (res) === 'string') {\r\n        if (res !== 'done') rel.innerHTML = res // a way to \"out\"\r\n      } else {\r\n        rel.innerHTML = ''\r\n        if (Array.isArray(res)) res.forEach(function (e) { rel.appendChild(e) })\r\n        else rel.appendChild(res)\r\n      }\r\n      if (rel.parentNode.classList.contains('container')) { rel = rel }\r\n      run(rel) // hydrate nested components (should we only do this if we have a template?)\r\n      if (rel.parentNode.classList.contains('container')) { console.log('render', new Date() - t) }\r\n    }\r\n  }\r\n  Reefer.prototype.rerender = function () {\r\n    xs.debounce(this.sym + '_rr', this, rerender, true)\r\n  }\r\n  function rerender () {\r\n    var sel = saveSelection(this.rootEl)\r\n    render.call(this)\r\n    sel()\r\n  }\r\n  function getAttachPoint (el) {\r\n    switch (el.nodeName) {\r\n      case 'TABLE': return (el.childNodes && el.childNodes[0]) || el\r\n      default: return el\r\n    }\r\n  }\r\n  function hash (str) {\r\n    var hash = 0\r\n    var l = str.length\r\n    for (var i = 0; i < l; i++) {\r\n      var char = str.charCodeAt(i)\r\n      hash = ((hash << 5) - hash) + char\r\n      hash = hash | 0\r\n    }\r\n    return hash\r\n  }\r\n  Reefer.prototype.htmlBegin = function (forceClean) {\r\n    if (!this.__.harr || forceClean) {\r\n      this.__.hmap = {}\r\n      this.__.hgeneration = -1\r\n    }\r\n    this.__.harr = []\r\n    this.__.hgeneration++\r\n    this.__.fcounter = 0\r\n  }\r\n\r\n  function replaceNode (c, nch) {\r\n    var p = c.previousSibling\r\n    var pn = p || c.parentNode\r\n    if (!c.getAttribute) { c.nodeValue = nch } else { c.outerHTML = nch }\r\n    return p ? p.nextSibling : pn.childNodes[0]\r\n  }\r\n\r\n  function copyAttributes (c, n) {\r\n    try {\r\n      var a = {}; var at\r\n      var na = n.attributes; var nal = na.length\r\n      for (var i = 0; i < nal; i++) {\r\n        at = na[i]; a[at.name] = true\r\n        if (c.getAttribute(at.name) !== at.value) c.setAttribute(at.name, at.value)\r\n      }\r\n      var ca = c.attributes; var cal = ca.length\r\n      if (cal === nal) return true\r\n      for (i = 0; i < cal; i++) {\r\n        at = ca[i]; if (a[at.name]) continue\r\n        c.removeAttribute(at.name)\r\n      }\r\n    } catch (err) { return true }\r\n  }\r\n  function attemptMerge (c, n) {\r\n    if (c.nodeType === 3 && n.nodeType === 3) {\r\n      c.nodeValue = n.nodeValue\r\n      return true\r\n    }\r\n    if ((c.nodeName !== n.nodeName) ||\r\n        (!copyAttributes(c, n))) return false\r\n    if (c.childNodes.length || n.childNodes.length) {\r\n      var i\r\n      var cc = c.childNodes\r\n      var nc = n.childNodes\r\n      var il = i = Math.min(cc.length, nc.length)\r\n      while (--i >= 0) {\r\n        var ccn = cc[i]\r\n        var ncn = nc[i]\r\n        if (ccn.nodeType === 3 && ncn.nodeType === 3) { ccn.nodeValue = ncn.nodeValue; continue }\r\n        if (ccn.isEqualNode(ncn)) continue\r\n        if (ccn.nodeName !== ncn.nodeName || !attemptMerge(ccn, ncn)) {\r\n          c.replaceChild(ncn, ccn)\r\n        }\r\n      }\r\n      while (il < cc.length) c.removeChild(cc[il++])\r\n      while (il < nc.length) c.appendChild(nc[il++])\r\n    }\r\n    return true\r\n  }\r\n\r\n  function mergeNode (c, n) {\r\n    if (c.nodeName !== n.nodeName || !attemptMerge(c, n)) {\r\n      c.parentNode.replaceChild(n, c)\r\n      return n\r\n    }\r\n    return c\r\n  }\r\n\r\n  Reefer.prototype.htmlUpdate = function (idx, id, htmlGen) {\r\n    var _ = this.__\r\n    var hm = _.hmap\r\n    if (!hm) return\r\n    var hsh = hash(htmlGen)\r\n    id = (id === undefined || id === null) ? hsh : id\r\n    if (!(id in hm)) reefError('updateing non-existent element')\r\n    if (hm[id].hsh === hsh && idx === hm[id].idx) return\r\n    var root = getAttachPoint(this.rootEl)\r\n    var c = hm[id].el\r\n    if (!c.getAttribute) { if (c.nodeValue !== htmlGen) c.nodeValue = htmlGen; return } // cheat\r\n    var div = document.createElement(root.nodeName)\r\n    div.innerHTML = htmlGen\r\n    hm[id].el = mergeNode(root.childNodes[idx], div.childNodes[0])\r\n    // hm[id].el = replaceNode(root.childNodes[idx], htmlGen)\r\n    hm[id].hsh = hsh\r\n    hm[id].idx = idx\r\n  }\r\n\r\n  Reefer.prototype.htmlEnd = function () {\r\n    var _ = this.__\r\n    var genid = _.hgeneration\r\n    var hta = ''\r\n    var ha = _.harr\r\n    var hm = _.hmap\r\n    if (!ha) return\r\n    var fl = this.__.fcounter\r\n    var prev = null\r\n    if (fl === 0) {\r\n      this.htmlBegin(true) // reset\r\n      this.rootEl.innerHTML = ''\r\n      return\r\n    }\r\n    if (genid === 0 || fl === 0) this.rootEl.innerHTML = '' // do this first\r\n    for (var k in hm) { // delete untouched\r\n      var hc = hm[k]\r\n      if (hc.generation === genid) continue\r\n      if (hc.el) hc.el.parentNode.removeChild(hc.el)\r\n      delete hm[k]\r\n    }\r\n\r\n    var root = getAttachPoint(this.rootEl)\r\n    var div = document.createElement(root.nodeName)\r\n\r\n    var ah = {}; var htaa = ''; var cnt = 0\r\n    for (var i = 0; i < fl; i++) {\r\n      var haa = ha[i]\r\n      if (!haa.h) { ah[i] = null; continue }\r\n      ah[i] = cnt++\r\n      htaa += haa.h\r\n    }\r\n    if (cnt) div.innerHTML = htaa\r\n\r\n    cnt = 0\r\n    for (var i = 0; i < fl; i++) {\r\n      var c = ha[i].el\r\n      var h = ha[i].h\r\n      if (h) {\r\n        if (i >= root.childNodes.length) {\r\n          hta += h\r\n        } else {\r\n          var n = div.childNodes[ah[i] - cnt]\r\n          if (c) n = mergeNode(c, n)\r\n          if (n !== c) {\r\n            ha[i].el = n\r\n            cnt++\r\n          }\r\n        }\r\n        ha[i].h = null\r\n      }\r\n      c = ha[i].el\r\n      if (c && (c.parentNode !== root || c.previousSibling !== prev)) { // clean up placement\r\n        if (prev) {\r\n          prev.parentNode.insertBefore(c, prev.nextSibling)\r\n        } else if (!root.childNodes || root.childNodes[0] !== c) {\r\n          root.insertBefore(c, root.childNodes && root.childNodes[0])\r\n        }\r\n      }\r\n      prev = c\r\n    }\r\n    ha.length = fl\r\n\r\n    if (hta) root.insertAdjacentHTML('beforeend', hta) // end insert\r\n    root = getAttachPoint(this.rootEl)\r\n    if (root && ha.length != root.childNodes.length) {\r\n      console.error('must be 1 html() entity for hmtl()')\r\n      debugger\r\n    }\r\n    hm = {}\r\n    for (var i = 0; i < ha.length; i++) {\r\n      hm[ha[i].id] = ha[i]\r\n      ha[i].el = root.childNodes[i]\r\n      ha[i].idx = i\r\n    }\r\n    return 'done'\r\n  }\r\n  Reefer.prototype.htmlKeyToIdx = function (id) {\r\n    var hm = this.__.hmap\r\n    if (!hm || !hm[id]) return null\r\n    return hm[id].idx\r\n  }\r\n\r\n  Reefer.prototype.html = function (id, htmlGen) {\r\n    if (!this.__.harr) this.htmlBegin()\r\n    var _ = this.__\r\n    var ha = _.harr\r\n    var hm = _.hmap\r\n    var idx = _.fcounter++\r\n    var genid = _.hgeneration\r\n    var hsh = hash(htmlGen)\r\n    id = (id === undefined || id === null) ? hsh : id\r\n\r\n    if (hm[id]) {\r\n      var hc = hm[id]\r\n      if (hc.generation === genid) reefError('duplicate html() id')\r\n      hc.generation = genid\r\n      ha[idx] = hc\r\n      if (hc.hsh === hsh) return\r\n      hc.h = htmlGen\r\n      hc.hsh = hsh\r\n    } else {\r\n      var o = {\r\n        h: htmlGen,\r\n        hsh: hsh,\r\n        idx: idx,\r\n        id: id,\r\n        generation: genid\r\n      }\r\n      ha.splice(idx, 0, o)\r\n      hm[id] = o\r\n    }\r\n  }\r\n\r\n  Reefer.prototype.dot = function (path, value) {\r\n    var v = dot(this, path)\r\n    if (arguments.length > 1) {\r\n      if (!v.obj) throw ('chain path missing')\r\n      v.obj[v.prop] = value\r\n    }\r\n    return v\r\n  }\r\n  Reefer.prototype.styleBag = function (e, s) {\r\n    var rel = e instanceof Node ? e : this.rootEl\r\n    if (rel === this.rootEl) s = e\r\n    var hsh = hash(JSON.stringify(s))\r\n    if (rel.__xs__style === hsh) return\r\n    for (var k in s) rel.style[k] = s[k]\r\n    rel.__xs__style = hsh\r\n  }\r\n\r\n  // ===========\r\n  // utilities\r\n  // ===========\r\n  /*\r\n  function hoist (o, f) {\r\n    if (o[f].__hoisted__) return false\r\n    var _f = function () { f.apply(p, arguments) }\r\n    o[f] = _f\r\n    xs.privateprop(o, '__hoisted__', true)\r\n    return true\r\n  } */\r\n  /*\r\n  function dotpath (obj, path, value) {\r\n    if (typeof (obj) === 'string') { value = path; path = obj; obj = this }\r\n    var inobj = obj\r\n    var spl = path.split('.')\r\n    var l = spl.length\r\n    var ctx = obj; var key\r\n    for (var i = 0; i < l && (obj !== undefined || !i); i++) {\r\n      key = spl[i]\r\n      ctx = obj\r\n      obj = (obj && key in obj) ? obj[key] : undefined\r\n    }\r\n    if (arguments.length > (inobj === this ? 1 : 2)) {\r\n      if (i !== l) throw Error('full chain path does not exist')\r\n      ctx[key] = value\r\n    }\r\n    var ret = { value: obj, key: key, obj: ctx }\r\n    return (i === l) ? ret : { last: ret }\r\n  }\r\n  */\r\n  function dot (obj, spl) {\r\n    if (typeof (spl) === 'string') spl = spl.split('.')\r\n    var ctx = obj; var l = spl.length; var key\r\n    for (var i = 0; i < l && (obj !== undefined || !i); i++) {\r\n      key = spl[i]; ctx = obj\r\n      obj = (obj && key in obj) ? obj[key] : undefined\r\n    }\r\n    var ret = { value: obj, prop: key, obj: ctx }\r\n    return (i === l) ? ret : { last: ret }\r\n  }\r\n\r\n  function getChildIndex (node) { return [].indexOf.call(node.parentNode.childNodes, node) }\r\n  function saveSelection (rootEl) { // save the text selection (call the ret() as func to retore)\r\n    var ael = document.activeElement\r\n    if (ael) {\r\n      var startPosition = ael.selectionStart\r\n      var endPosition = ael.selectionEnd\r\n      var aeindex = []\r\n      while (ael && ael !== rootEl && ael.parentNode) {\r\n        aeindex.push(getChildIndex(ael))\r\n        ael = ael.parentNode\r\n      }\r\n    }\r\n    return function () {\r\n      if (ael) {\r\n        ael = rootEl\r\n        while (ael && aeindex.length) {\r\n          var ind = aeindex.pop()\r\n          ael = ael.childNodes[ind]\r\n        }\r\n        if (ael) {\r\n          if (ael.focus) ael.focus()\r\n          try {\r\n            ael.selectionStart = startPosition\r\n            ael.selectionEnd = endPosition\r\n          } catch (err) {}\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /*\r\n  function createCSS (name, rules) {\r\n    var style = document.createElement('style')\r\n    style.type = 'text/css'\r\n    document.getElementsByTagName('head')[0].appendChild(style)\r\n    if (!(style.sheet || {}).insertRule) { (style.styleSheet || style.sheet).addRule(name, rules) } else { style.sheet.insertRule(name + '{' + rules + '}', 0) }\r\n  }\r\n\r\n  createCSS('reef-helper', 'display:none;')\r\n*/\r\n  function emit (el, ev, detail) {\r\n    el = resolveEl(el); detail = detail || {}\r\n    if (el) { detail.reefEmitRootEl = el }\r\n    document.dispatchEvent(new CustomEvent(ev, { detail: detail }))\r\n  }\r\n\r\n  function ready (cb) {\r\n    if (document.readyState === 'complete' ||\r\n      (document.readyState !== 'loading' && !document.documentElement.doScroll)) {\r\n      cb()\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', cb)\r\n    }\r\n  }\r\n  if (opts.autorun) {\r\n    ready(function () {\r\n      run()\r\n    })\r\n  }\r\n\r\n  opts.use = opts.use || Reefer\r\n  var templateEngine = legacy ? templateGeneratorES5 : templateGenerator\r\n\r\n  // ===========\r\n  // exports\r\n  // ===========\r\n  return {\r\n    register: register,\r\n    mount: mount,\r\n    run: run,\r\n    template: templateEngine,\r\n    ready: ready,\r\n    emit: emit,\r\n    styleBag: Reefer.prototype.styleBag,\r\n    registry: function (name) { return name ? rf_registry[name] : rf_registry },\r\n    find: function (a, ctx) { a = this.findAll(a, ctx); return a ? a[0] : null },\r\n    findAll: function (a, ctx) { a = [].slice.call((ctx || document).querySelectorAll(a)); var j = 0; if (a) for (var i = 0; i < a.length; i++) { a[j] = a[i].reef; j += a[j] ? 1 : 0 } return j ? (a.length = j, a) : null }\r\n  }\r\n}\r\n\r\nwindow.reefer = ReeferFactory({ autorun: true })\r\n"],"sourceRoot":""}